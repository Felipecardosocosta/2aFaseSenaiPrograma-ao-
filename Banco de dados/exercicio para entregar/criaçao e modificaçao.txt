CREATE DATABASE banco_senai;

USE banco_senai;


CREATE TABLE categoria_cliente(
id_categoria_cliente INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
nom_categoria VARCHAR(100)
);

CREATE TABLE tipo_conta (
id_tipo_conta INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
des_tipo_conta VARCHAR(100)
);

CREATE TABLE agencia(
id_num_agencia INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
nom_agencia VARCHAR(100)
);

CREATE TABLE cliente(
id_cod_cliente INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
nom_cliente VARCHAR(100),
num_cpf BIGINT(11),
num_cnpj BIGINT(14),
num_celular BIGINT(20),
rua VARCHAR(75),
numero INT,
bairro VARCHAR(45),
cep INT,
cidade VARCHAR(45),
estado VARCHAR(45),
categoria_cliente_id INT,
FOREIGN KEY(categoria_cliente_id)
REFERENCES categoria_cliente(id_categoria_cliente)

);

CREATE TABLE conta(
id_num_conta INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
tipo_conta_id INT,
cod_cliente_id INT,
num_agencia_id INT,
FOREIGN KEY(tipo_conta_id)
REFERENCES tipo_conta(id_tipo_conta),
FOREIGN KEY(cod_cliente_id)
REFERENCES cliente(id_cod_cliente),
FOREIGN KEY(num_agencia_id)
REFERENCES agencia(id_num_agencia)
);


-- parte 2 

ALTER TABLE cliente
RENAME COLUMN num_celular TO telefone;

ALTER TABLE categoria_cliente
ADD COLUMN observacao TEXT;

ALTER TABLE cliente
ADD COLUMN renda DECIMAL(8,2);


ALTER TABLE tipo_conta
MODIFY des_tipo_conta TEXT;

ALTER TABLE agencia
MODIFY nom_agencia VARCHAR(45);

ALTER TABLE cliente
DROP COLUMN estado;

ALTER TABLE categoria_cliente
RENAME TO categoria;

ALTER TABLE tipo_conta
ADD observacao TEXT;